<h1 id="Hexo-注入器实践"><a href="#Hexo-注入器实践" class="headerlink" title="Hexo 注入器实践"></a>Hexo 注入器实践</h1><h2 id="前言"><a href="#前言" class="headerli<hr /><h1 id="Hexo-注入器实践"><a href="#Hexo-注入器实践" class="headerlink" title="Hexo 注入器实践"></a>Hexo 注入器实践</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>我博客首页飘的那个樱花看着花里胡哨，但是非常占用资源……而且因为是直接引进来的 <code>js</code> ，所以每个页面都有这玩意，但是毕竟花里胡哨，也就对性能问题睁一只眼闭一只眼，刚才翻别人博客突然发现了注入器这个神奇玩意，于是问题解决了：只在首页显示樱花飘落的动画。</p><h3 id="参考博客"><a href="#参考博客" class="headerlink" title="参考博客"></a>参考博客</h3><blockquote><p><a href="https://gishai.top/blog/posts/1563abd8.html">基于hexo的fluid主题的魔改汇总 - GISHAI</a></p><p><a href="https://hexo.fluid-dev.com/docs/advance/#hexo-%E6%B3%A8%E5%85%A5%E4%BB%A3%E7%A0%81">进阶用法 | Hexo Fluid 用户手册 (fluid-dev.com)</a></p></blockquote><h2 id="具体实践"><a href="#具体实践" class="headerlink" title="具体实践"></a>具体实践</h2><p>在 <strong><a href="https://hexo.fluid-dev.com/docs/">Hexo Fluid 用户手册</a></strong> 中说的比较清楚了：注入器可以将 HTML 片段注入生成页面的 <code>&lt;head&gt;</code> 和 <code>&lt;body&gt;</code> 节点中，而且可以选择注入的页面类型（比如我首页的樱花我可以选择只注入首页）。</p><p>编写注入代码，需要在博客的根目录下创建 <code>scripts</code> 文件夹，然后在里面任意命名创建一个 js 文件即可。</p><p>我创建了一个 <code>/Hexo/scripts/yinghua.js</code> 了一个文件，内容为：</p><figure><div class="code-wrapper"><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">hexo<span class="token punctuation">.</span>extend<span class="token punctuation">.</span>injector<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>    <span class="token string">'body_end'</span><span class="token punctuation">,</span>     <span class="token string">'&lt;script src="//must.best/assets/js/flower.js">&lt;/script>'</span><span class="token punctuation">,</span>     <span class="token string">'home'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>上述代码会在生成的页面 <code>&lt;/body&gt;</code> 注入加载 <code>//must.best/assets/js/flower.js</code> 的代码。</p><p>这里发挥作用的是 <strong><code>register</code></strong> 函数。</p><h3 id="register-函数"><a href="#register-函数" class="headerlink" title="register 函数"></a><code>register</code> 函数</h3><p><code>register</code> 函数可接受三个参数。</p><ol><li><p><strong>第一个参数</strong></p><p>第一个参数是<strong>代码片段注入的位置</strong>，接受以下值：</p><ul><li><code>head_begin</code>: 注入在 <code>&lt;head&gt;</code> 之后（默认）</li><li><code>head_end</code>: 注入在 <code>&lt;/head&gt;</code> 之前</li><li><code>body_begin</code>: 注入在 <code>&lt;body&gt;</code> 之后</li><li><code>body_end</code>: 注入在 <code>&lt;/body&gt;</code> 之前</li></ul></li><li><p><strong>第二个参数</strong></p><p>第二个参数是注入的片段，可以是字符串，也可以是一个返回值为字符串的函数。</p></li><li><p><strong>第三个参数</strong></p><p>第三个参数是注入的页面类型，接受以下值：</p><ul><li><code>default</code>: 注入到每个页面（默认值）</li><li><code>home</code>: 只注入到主页（<code>is_home()</code> 为 <code>true</code> 的页面）</li><li><code>post</code>: 只注入到文章页面（<code>is_post()</code> 为 <code>true</code> 的页面）</li><li><code>page</code>: 只注入到独立页面（<code>is_page()</code> 为 <code>true</code> 的页面）</li><li><code>archive</code>: 只注入到归档页面（<code>is_archive()</code> 为 <code>true</code> 的页面）</li><li><code>category</code>: 只注入到分类页面（<code>is_category()</code> 为 <code>true</code> 的页面）</li><li><code>tag</code>: 只注入到标签页面（<code>is_tag()</code> 为 <code>true</code> 的页面）</li><li>或是其他自定义 layout 名称，例如在Fluid 主题中 <code>about</code> 对应关于页、<code>links</code> 对应友联页</li></ul><p>比如上面我要樱花飘落的动画只在首页显示，所以选择 <code>home</code> 这个参数。</p></li></ol>